<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<title>æ¾³é–€ç¾é£Ÿæ¨‚é€æŠ½ç±¤ï¼ˆå…¨éƒ¨é«˜åº¦1000pxï¼‰</title>
<style>
  *{box-sizing:border-box;}
  body{
    font-family:"å¾®è»Ÿæ­£é»‘é«”",Helvetica,Arial,sans-serif;
    margin:0;padding:0;
    background:url('Xie-Qu.jpg') no-repeat center center fixed;
    background-size:cover;
    color:#1c1c1c;
    display:flex;gap:10px;
    height:100vh;overflow:hidden;
    flex-wrap:nowrap;justify-content:center;
  }
  body::before{
    content:"";position:fixed;inset:0;
    background:rgba(255,255,255,0.12);
    z-index:0;pointer-events:none;
  }
  #history{flex:1 1 280px;min-width:260px;display:flex;flex-direction:column;gap:14px;}
  #main{flex:1.6 1 360px;min-width:320px;text-align:center;display:flex;flex-direction:column;align-items:center;}
  #all-restaurants{flex:1 1 280px;min-width:260px;}
  #history,#main,#all-restaurants{
    background:rgba(255,248,230,0.92);
    padding:16px 14px;border-radius:14px;
    box-shadow:0 8px 12px rgba(217,175,65,0.6),inset 0 0 12px rgba(255,244,210,0.8);
    border:3px solid #d9ae41;backdrop-filter:saturate(180%) blur(8px);
    font-size:16px;font-weight:600;position:relative;line-height:1.5;z-index:1;overflow:hidden;
  }
  #history::before,#main::before,#all-restaurants::before{
    content:"";position:absolute;top:10px;left:10px;right:10px;bottom:10px;
    border:2px solid #d6b84a;border-radius:12px;pointer-events:none;
  }
  .history-block{display:flex;flex-direction:column;}
  /* æ­£é¤æ­·å²ã€ç”œé»æ­·å²é«˜åº¦æ”¹ç‚º1000px */
  #history-main,#history-dessert{
    height:1000px;
    max-height:1000px;
    overflow-y:auto;
    margin-top:6px;
  }
  .history-item{
    background:#fffceb;border-radius:7px;padding:8px;margin-bottom:8px;
    box-shadow:inset 0 0 6px rgba(217,175,65,0.35);
    cursor:pointer;
  }
  .history-item:hover{background:#f9f0c5;}
  .button-row{display:flex;justify-content:center;gap:12px;margin-bottom:12px;flex-wrap:wrap;}
  .button-row button{max-width:160px;}
  #result{flex:1;overflow-y:auto;display:flex;flex-direction:column;align-items:center;max-height:45vh;width:100%;}
  /* ä»Šæ—¥è¡Œç¨‹é«˜åº¦æ”¹ç‚º1000px */
  #itinerary{
    margin-top:10px;height:1000px;max-height:1000px;overflow-y:auto;border-radius:14px;
    background:rgba(255,248,230,0.95);
    box-shadow:0 6px 10px rgba(217,175,65,0.7),inset 0 0 12px rgba(255,244,210,0.85);
    width:100%;display:flex;flex-direction:column;align-items:center;}
  #itinerary-list{width:100%;display:flex;flex-direction:column;align-items:center;}
  #itinerary .history-item{display:flex;align-items:center;justify-content:space-between;width:90%;max-width:440px;}
  #itinerary .info{text-align:center;flex:1;margin-right:10px;}
  #itinerary .info strong{color:#916f02;font-size:17px;}
  #itinerary .history-item button{background:#b28722;border:none;border-radius:6px;color:#fff;padding:6px 12px;cursor:pointer;font-size:14px;}
  #itinerary .history-item button:hover{background-color:#dbae3e;}
  h1,h2{color:#b47f18;text-shadow:1px 1px 3px rgba(168,134,20,0.8);margin-bottom:12px;}
  button{background:linear-gradient(135deg,#b28722,#dbae3e);border:none;padding:10px 22px;color:#fff8dc;font-size:16px;font-weight:bold;border-radius:22px;cursor:pointer;box-shadow:0 4px 8px rgba(181,135,34,0.6);}
  .result-card{background:#fff5d9;border-radius:10px;padding:14px;margin:8px auto;width:100%;max-width:380px;text-align:center;box-shadow:0 3px 8px rgba(208,169,47,0.7);}
  .address-link{color:#916f02;}
  ul{list-style:none;padding-left:8px;font-size:16px;}
  li{padding:6px 0;border-bottom:1px solid #d1b252;}
  #list-main{max-height:440px;overflow-y:auto;}
  #list-dessert{max-height:none;overflow-y:visible;}
  @media (max-width:640px){
    body{flex-wrap:wrap;overflow-y:auto;height:auto;}
    #history,#main,#all-restaurants{width:100%;min-width:unset;flex:none;}
    #history-main,#history-dessert{max-height:300px;height:auto;}
    #itinerary{height:300px;max-height:300px;}
  }
</style>
</head>
<body>

<div id="history">
  <div class="history-block">
    <h2>ğŸœ æ­£é¤æ­·å²</h2>
    <div id="history-main"></div>
  </div>
  <div class="history-block">
    <h2>ğŸ® ç”œé»æ­·å²</h2>
    <div id="history-dessert"></div>
  </div>
</div>

<div id="main">
  <h1>ğŸ½ æ¾³é–€ç¾é£Ÿæ¨‚é€æŠ½ç±¤</h1>
  <div class="button-row">
    <button onclick="drawLottery('main')">æŠ½æ­£é¤</button>
    <button onclick="drawLottery('dessert')">æŠ½ç”œé»</button>
    <button onclick="drawBoth()">æŠ½æ­£é¤+ç”œé»</button>
  </div>
  <div id="result"></div>
  <div id="itinerary">
    <h2>ğŸ“… ä»Šæ—¥è¡Œç¨‹</h2>
    <div id="itinerary-list"></div>
  </div>
</div>

<div id="all-restaurants">
  <h2>æ‰€æœ‰é¤å»³</h2>
  <strong>ğŸœ æ­£é¤é¡</strong>
  <ul id="list-main"></ul>
  <strong>ğŸ® ç”œé»é¡</strong>
  <ul id="list-dessert"></ul>
</div>

<script>
/* æ­£é¤èˆ‡ç”œé»è³‡æ–™ï¼šå·²å‰”é™¤é‡è¤‡èˆ‡éŒ¯èª¤åœ°å€ */
const restaurantsMain = [
  {name:"é™³å…‰è¨˜ç‡’è‡˜åº—", dish:"é»‘æ¤’ç‡’é´¨ã€ç‡’éµã€ä¸‰æ‹¼é£¯", time:"09:00â€“01:00", address:"æ¾³é–€å—ç£ç¾…ä¿åšå£«è¡—19-39è™Ÿè¬å‹å¤§å»ˆ"},
  {name:"é›…é¦¨ç·¬ç”¸é¤å»³", dish:"é­šæ¹¯ç²‰ã€é¦¬æ‹‰ç›é›çµ²æ’ˆéºµ", time:"08:00â€“19:30", address:"æ¾³é–€æ–°æ©‹é£›èƒ½ä¾¿åº¦è¡—27è™Ÿåœ°ä¸‹Fåº§æ ¢ç›§å¤§å»ˆ"},
  {name:"é‡‘åˆ©é£Ÿåº—", dish:"å’–å“©é›ç±³ã€é›™æ±é›è…©ç±³ã€å’–å“©ç‰›è…©", time:"07:00â€“16:45", address:"æ¾³é–€é›…å»‰è¨ªå¤§é¦¬è·¯85è™ŸCåœ°ä¸‹"},
  {name:"å¾·ä»”è¨˜ç‡’å‘³èŒ¶é¤å»³", dish:"æ›çˆç‡’é´¨é£¯ã€è¥¿å¤šå£«ã€å‰ç‡’", time:"07:00â€“21:00", address:"æ¾³é–€æ°¹ä»”å—äº¬è¡—161è™Ÿ-177è™Ÿå¤ªå­èŠ±åŸåœ°ä¸‹B,C,Dèˆ–"},
  {name:"æ–°è¨˜ç¾é£Ÿ", dish:"è±¬å¤§è…¸ã€é›ä¸­ç¿…ã€ä¸¸é¡", time:"07:00â€“23:30", address:"æ¾³é–€é¦¬å ´å¤§é¦¬è·¯18è™Ÿæ ¢éº—èŠ±åœ’ç¬¬ä¸€åº§åŠäºŒåº§åœ°ä¸‹Ué‹ª"},
  {name:"å½ªè¨˜è…¸ç²‰ç¾é£Ÿ", dish:"é¦™æ»‘è…¸ç²‰ã€é¹¹è‚‰ç²½ã€ç¦æ»¿é­šç¿…é›æ¹¯æ³¡é£¯", time:"10:00â€“21:00", address:"æ¾³é–€é‡‘ç¢§åŠä¸€æ¨“107è™Ÿèˆ–"}
];
const restaurantsDessert = [
  {name:"å–œè“®å’–å•¡", dish:"ä¹¾ç‚’ç‰›è‚‰ç²’é£¯ã€ç‚¸å’–å“©è§’ã€æ¤°æ±ç´…è±†å†°", time:"å‘¨ä¸€07:00â€“17:00ï¼›å‘¨äºŒè‡³æ—¥07:30â€“20:30", address:"æ¾³é–€æ°¹ä»”é£›èƒ½ä¾¿åº¦è¡—å—é¾èŠ±åœ’åœ°ä¸‹B84è™Ÿ"},
  {name:"æ–°é´»ç™¼å’–å•¡ç¾é£Ÿ", dish:"æ³•è˜­è¥¿å¤šå£«ã€è¥¿å¤šå£«", time:"06:00â€“18:00", address:"æ¾³é–€è³ˆä¼¯æ¨‚æç£è¡—55è™Ÿå¯Œæ˜æ¨“Aè™Ÿ"},
  {name:"ä¸–ç´€å’–å•¡", dish:"ç“¦ç…²å’–å•¡ã€åšè›‹é¹¹ç‰›è‚‰å¤šå£«", time:"11:00â€“19:00 (å‘¨ä¸€ä¼‘)", address:"æ¾³é–€å—ç£æ¹–æ™¯å¤§é¦¬è·¯744Fè™Ÿæ¹–æ™¯è±ªåº­åœ°ä¸‹Eè™Ÿèˆ–"},
  {name:"Goat Bakers", dish:"å¥¶é…ªèŠ±æ¯å­ã€å½©è™¹ç‰›è§’éºµåŒ…", time:"12:00â€“20:00", address:"æ¾³é–€æ°¸è¯å°52è™Ÿæ°¸è¯å¤§å»ˆåœ°èˆ–"},
  {name:"ä¸–è¨˜å’–å•¡", dish:"ç“¦ç…²å’–å•¡ã€é¦™æ»‘å¥¶èŒ¶ã€è±¬æ‰’åŒ…", time:"11:00â€“19:00 (å‘¨äºŒä¼‘)", address:"æ¾³é–€ä¹¾è‰åœ15è™Ÿ"},
  {name:"å—å±é›…æ•˜", dish:"ä¸‰æ–‡æ²»ã€å¤šå£«ã€è›‹æ’»", time:"06:30èµ·ç‡Ÿæ¥­", address:"æ¾³é–€å¤§ä¸‰å·´ç‰ŒåŠé™„è¿‘"},
  {name:"Inn Cafe", dish:"æ¾³é–€ç‰¹è‰²å°åƒ", time:"ç‡Ÿæ¥­æ™‚é–“å¾…ç¢ºèª", address:"æ¾³é–€å˜‰æ¨‚åº‡ç¸½ç£å¤§é¦¬è·¯822è™Ÿ"},
  {name:"å®‰çªå…’å’–å•¡åŠé…’å»Š", dish:"å’–å•¡ã€è¼•é£Ÿ", time:"07:30â€“23:00 (äº”å…­æ—¥åˆ°00:00)", address:"æ¾³é–€è‘¡äº¬äººé…’åº—1æ¨“L04èˆ–"},
  {name:"ç‘ªå˜‰çƒˆè›‹å¡”åº—", dish:"è‘¡å¼è›‹å¡”", time:"å¹³æ—¥08:30â€“16:30ï¼›å‡æ—¥10:00â€“18:00 (å‘¨ä¸‰ä¼‘)", address:"æ¾³é–€é¦¬çµ±é ˜åœ66è™Ÿ"},
  {name:"å®‰å¾·é­¯é¤…åº—", dish:"è‘¡å¼è›‹å¡”", time:"07:00â€“21:00", address:"æ¾³é–€è·¯ç’°å¸‚å€æˆ´ç´³ç¦®è¡—1è™Ÿ"},
  {name:"ç¾©é †ç‰›å¥¶å…¬å¸", dish:"é›™çš®ç‡‰å¥¶ã€ç‡‰å¥¶", time:"11:00â€“21:00", address:"æ¾³é–€äºç¾æ‰“åˆ©åº‡ç›§å¤§é¦¬è·¯381è™Ÿ"},
  {name:"æª¸æª¬è»Šéœ²å†°åº—", dish:"ç¾©å¤§åˆ©æ‰‹æ‹‰é›ªç³•", time:"12:00â€“22:00", address:"æ¾³é–€æ°¹ä»”åœ°å ¡è¡—115è™ŸJé‹ª"},
  {name:"ç¦®è¨˜é›ªç³•", dish:"ç´…è±†å†°ã€æ‡·èˆŠé›ªç³•ä¸‰æ–‡æ²»", time:"12:00â€“19:00", address:"æ¾³é–€è·è˜­åœ’å¤§é¦¬è·¯12è™Ÿåœ°ä¸‹"},
  {name:"å…«ç›®çƒ˜åŸ¹ bamu bakery", dish:"è‘¡å¼è›‹å¡”ã€ç„¦ç³–è›‹å¡”", time:"10:00â€“19:00", address:"æ¾³é–€æœæ¬„è¡—25è™Ÿå¾·å¯Œå¤§å»ˆåœ°ä¸‹Bèˆ–"},
  {name:"æ¾¤è³¢è¨˜é›è›‹ä»”", dish:"è‘¡æ’»é›è›‹ä»”ã€å¤šå£å‘³é›è›‹ä»”", time:"10:30â€“21:00", address:"æ¾³é–€å®‰æ¨‚è¡—13-15è™Ÿ"}
];
let historyMain=[],historyDessert=[],itinerary=[];

/* åŠŸèƒ½å‡½å¼ç•¥åŒå‰ç‰ˆ */
function drawLottery(type){
  const pool = (type==='main'?restaurantsMain:restaurantsDessert);
  let list = type==='main'?historyMain:historyDessert;
  let avail= pool.filter(r=>!list.some(h=>h.name===r.name));
  if(!avail.length){list.length=0;avail=[...pool];}
  const pick= avail[Math.floor(Math.random()*avail.length)];
  displayResult([pick]);
  list.unshift(pick); if(list.length>5) list.pop();
  if(type==='main')historyMain=list;else historyDessert=list;
  updateHistory();
}
function drawBoth(){
  const m=pickOne('main'), d=pickOne('dessert');
  displayResult([m,d]); updateHistory();
}
function pickOne(type){
  const pool= type==='main'?restaurantsMain:restaurantsDessert;
  let list= type==='main'?historyMain:historyDessert;
  let avail= pool.filter(r=>!list.some(h=>h.name===r.name));
  if(!avail.length){list.length=0;avail=[...pool];}
  const pick= avail[Math.floor(Math.random()*avail.length)];
  list.unshift(pick); if(list.length>5) list.pop();
  if(type==='main') historyMain=list; else historyDessert=list;
  return pick;
}
function displayResult(picks){
  document.getElementById('result').innerHTML= picks.map(p=>`
    <div class="result-card">
      <h3>${p.name}</h3>
      <p>ğŸ´ ${p.dish}</p>
      <p>ğŸ•’ ${p.time}</p>
      <p>ğŸ“ <a class="address-link" href="https://maps.google.com?q=${encodeURIComponent(p.address)}" target="_blank">${p.address}</a></p>
      <button onclick='addToItinerary(${JSON.stringify(p)})'>+ åŠ å…¥è¡Œç¨‹</button>
    </div>`).join('');
}
function updateHistory(){
  document.getElementById('history-main').innerHTML= historyMain.map((h,i)=>`<div class="history-item" onclick="addToItineraryByHistory('main',${i})"><strong>${h.name}</strong><br>${h.dish}<br>${h.time}</div>`).join('');
  document.getElementById('history-dessert').innerHTML= historyDessert.map((h,i)=>`<div class="history-item" onclick="addToItineraryByHistory('dessert',${i})"><strong>${h.name}</strong><br>${h.dish}<br>${h.time}</div>`).join('');
}
function addToItineraryByHistory(type,index){
  const item = (type==='main'? historyMain[index]:historyDessert[index]);
  addToItinerary(item);
}
function renderLists(){
  document.getElementById('list-main').innerHTML= restaurantsMain.map(r=>`<li>${r.name}</li>`).join('');
  document.getElementById('list-dessert').innerHTML= restaurantsDessert.map(r=>`<li>${r.name}</li>`).join('');
}
function addToItinerary(p){
  if(!itinerary.some(i=>i.name===p.name)){itinerary.push(p);updateItineraryUI();}
}
function removeFromItinerary(name){
  itinerary= itinerary.filter(i=>i.name!==name);updateItineraryUI();
}
function updateItineraryUI(){
  document.getElementById('itinerary-list').innerHTML= itinerary.map((i,idx)=>`
    <div class="history-item">
      <div class="info"><strong>${idx+1}. ${i.name}</strong><br>${i.dish}<br>
      <a href="https://maps.google.com?q=${encodeURIComponent(i.address)}" target="_blank">${i.address}</a></div>
      <button onclick="removeFromItinerary('${i.name}')">åˆªé™¤</button>
    </div>`).join('');
}
renderLists();
updateHistory();
</script>
</body>
</html>
